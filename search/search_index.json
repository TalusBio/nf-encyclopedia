{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"A NextFlow pipeline for chromatogram library data-independent acquisition (DIA) proteomics workflows","text":"<p>nf-encyclopedia is a NextFlow pipeline specifically designed to analyze DIA proteomics experiment that leverage chromatogram libraries; however it is perfectly suited to analyze DIA proteomics experiments without chromatogram libraries as well.  The nf-encyclopedia connects three open-source tools\u2014MSconvert, EncyclopeDIA, and MSstats\u2014to go from mass spectra to quantified peptides and proteins. </p> <p></p> <p>If you use nf-encyclopedia in your research, please cite the pipeline and the tools it integrates.</p>"},{"location":"#installation","title":"Installation","text":"<p>We highly recommend using Docker when running nf-encyclopedia. To do so, we first need to install three prerequisites on our system:</p> <ul> <li>Docker desktop</li> <li>Java 11+</li> <li>NextFlow</li> </ul> <p>That\u2019s it! The nf-encyclopedia pipeline will be automatically downloaded when we launch it with NextFlow.</p>"},{"location":"#usage","title":"Usage","text":"<p>To use nf-encyclopedia, we need to provide a list of mass spectrometry data files to analyze and indicate whether each should be part of a chromatogram library, is a comma-separated values format. A minimal example of this input file would look like this (see the Parameters for additional details): input.csv<pre><code>file, chrlib\nS01.raw, true\nS02.raw, false\n</code></pre></p> <p>Additionally we need to provide a spectral library and a corresponding protein database in FASTA format.  Libraries can be obtained from a variety of sources, including real libraries from MassIVE-KB, predicted libraries from Prosit, or from our own data-dependent acquisition data; however, often these will need to be converted to EncyclopeDIA\u2019s DLIB format using EncyclopeDIA itself (see the EncyclopeDIA user guide for details).  We will call these files <code>proteins.dlib</code> and <code>proteins.fasta</code>.</p> <p>With these files present on our machine, we then open our terminal (command line) and navigate to the directory in which we want to conduct our analysis. We can then launch the nf-encyclopedia pipeline:1</p> <pre><code>nextflow run TalusBio/nf-encyclopedia -r latest --input input.csv --dlib proteins.dlib --fasta proteins.fasta\n</code></pre>"},{"location":"#using-a-configuration-file","title":"Using a configuration file","text":"<p>Alternatively, we can put these parameters and others in a NextFlow configuration file: pipeline.config<pre><code>params {\n    input = 'input.csv'\n    dlib  = 'proteins.dlib'\n    fasta = 'proteins.fasta'\n}\n</code></pre></p> <p>With this configuration file saved, we can instead launch our pipeline with:</p> <pre><code>nextflow run TalusBio/nf-encyclopedia -r latest -c pipeline.config\n</code></pre>"},{"location":"#outputs","title":"Outputs","text":"<p>The outputs from the nf-encyclopedia pipeline are the quantified peptides and proteins from each non-library file:</p> <ul> <li><code>encyclopedia.quant.peptides.txt</code> - The measured peptide abundance in each mass spectrometry data file from EncyclopeDIA.</li> <li><code>encyclopedia.quant.proteins.txt</code> - The measured protein abundance in each mass spectrometry data file from EncyclopeDIA.</li> </ul> <p>If MSstats was enabled:</p> <ul> <li><code>msstats.proteins.txt</code> - The model-based protein abundance estimates from MSstats.</li> <li><code>msstats.stats.txt</code> - Differential expression statistics (p-values, etc.) from MSstats.    This file will only exist if a contrast matrix is provided.</li> </ul>"},{"location":"#resources","title":"Resources","text":"<p>Here are additional resources to check out:</p> <ul> <li>The NextFlow documentation - See the NextFlow documentation to learn how to move beyond your local machine and more!</li> <li>nf-core - Community developed NextFlow pipelines, along with excellent training and resources.</li> <li>NextFlow Tower - Launch and monitor NextFlow pipelines using this web interface.</li> </ul> <ol> <li> <p>Note that you will likely need to set the <code>--max_cpus</code>, <code>--max_memory</code> to match your system as well. See Resource Parameters for details.\u00a0\u21a9</p> </li> </ol>"},{"location":"CITATION/","title":"Cite nf-encyclopedia","text":""},{"location":"CITATION/#nf-encyclopedia","title":"nf-encyclopedia","text":"<p>TODO: Add preprint</p>"},{"location":"CITATION/#pipeline-tools","title":"Pipeline Tools:","text":""},{"location":"CITATION/#msconvert","title":"MSconvert","text":"<p>Chambers, M. C., Maclean, B., Burke, R., Amodei, D., Ruderman, D. L., Neumann, S., Gatto, L., Fischer, B., Pratt, B., Egertson, J., Hoff, K., Kessner, D., Tasman, N., Shulman, N., Frewen, B., Baker, T. A., Brusniak, M.-Y., Paulse, C., Creasy, D., \u2026 Mallick, P. (2012). A cross-platform toolkit for mass spectrometry and proteomics. Nature Biotechnology, 30(10), 918\u2013920. https://doi.org/10.1038/nbt.2377</p>"},{"location":"CITATION/#encyclopedia","title":"EncyclopeDIA","text":"<p>Searle, B. C., Pino, L. K., Egertson, J. D., Ting, Y. S., Lawrence, R. T., MacLean, B. X., Villen, J., &amp; MacCoss, M. J. (2018). Chromatogram libraries improve peptide detection and quantification by data independent acquisition mass spectrometry. Nature Communications, 9(1). https://doi.org/10.1038/s41467-018-07454-w</p>"},{"location":"CITATION/#msstats","title":"MSstats","text":"<p>Choi, M., Chang, C.-Y., Clough, T., Broudy, D., Killeen, T., MacLean, B., &amp; Vitek, O. (2014). MSstats: An R package for statistical analysis of quantitative mass spectrometry-based proteomic experiments. Bioinformatics (Oxford, England), 30(17), 2524\u20132526. https://doi.org/10.1093/bioinformatics/btu305</p>"},{"location":"CITATION/#infrastructure","title":"Infrastructure:","text":""},{"location":"CITATION/#nextflow","title":"Nextflow","text":"<p>Di Tommaso, P., Chatzou, M., Floden, E. W., Barja, P. P., Palumbo, E., &amp; Notredame, C. (2017). Nextflow enables reproducible computational workflows. Nature Biotechnology, 35(4), 316\u2013319. https://doi.org/10.1038/nbt.3820</p>"},{"location":"CITATION/#nf-core","title":"nf-core","text":"<p>Ewels, P. A., Peltzer, A., Fillinger, S., Patel, H., Alneberg, J., Wilm, A., Garcia, M. U., Di Tommaso, P., &amp; Nahnsen, S. (2020). The nf-core framework for community-curated bioinformatics pipelines. Nature Biotechnology, 38(3), 276\u2013278. https://doi.org/10.1038/s41587-020-0439-x</p>"},{"location":"parameters/","title":"Parameters for nf-encyclopedia","text":"<p>The following parameters can be used to customize various aspects of the nf-encyclopedia pipeline.  These may either be specified as command line arguments, prefixed with <code>--</code>, or in a new NextFlow configuration file. For example: pipeline.config<pre><code>params {\n    input = 'input.csv'\n    dlib  = 'proteins.dlib'\n    fasta = 'proteins.fasta'\n}\n</code></pre></p>"},{"location":"parameters/#inputoutput-parameters","title":"Input/Output Parameters","text":"<ul> <li> <p>input (string, required) - A comma-separated values (CSV) file specifying the mass spectrometry data files to be analyzed. This file must have at least two columns: <code>file</code> <code>chrlib</code>.    The <code>file</code> columns contains the paths to the mass spectrometry data files in formats supported by MSconvert.    The <code>chrlib</code> column contains either <code>true</code> or <code>false</code> depending on whether a file should be considered part of a chromatogram library or not.    The optional <code>group</code> maybe used to specify which chromatogram library files should be used to analyze each quantitative run.    Optionally, <code>condition</code> and <code>bioreplicate</code> columns can be included and will be used by MSstats.   These columns are ignored for chromatogram library files.   See the MSstats documentation for details.   Here is an example (note that the <code>condition</code>, <code>bioreplicate</code>, and <code>group</code> are optional):</p> file chrlib condition bioreplicate group lib1.raw true batch1 lib2.raw true batch2 trt1.raw false treatment patient1 batch1 trt2.raw false treatment patient2 batch2 ctr1.raw false control patient3 batch1 ctr2.raw false control patient4 batch2 </li> <li> <p>dlib (string, required) -  A spectral library in EncyclopeDIA\u2019s DLIB format.    See the EncyclopeDIA  documentation for details.</p> </li> <li> <p>fasta (string, required) -  The FASTA containing the subset of proteins sequences for which to search.</p> </li> <li> <p>contrasts (string, required) - The contrast matrix defining the hypothesis tests to perform with MSstats provided as a comma-separated values (CSV) file.    The columns of the file should denote conditions from the <code>input</code> CSV file.   The first column defines the name of each hypothesis test.   See the  MSstats documentation for more details.   This is an example contrast matrix for the input example above:</p> treatment control TreatmentVsControl 1 -1 </li> <li> <p>result_dir (string) - Where results will be saved. Default: <code>'results'</code></p> </li> <li>report_dir (string) -  Where reports will be saved. Default: <code>'reports'</code></li> <li>mzml_dir (string) -  Where mzML files will be saved. Default: <code>'mzml'</code></li> <li>email (string) - An email to alert on completion.</li> </ul>"},{"location":"parameters/#grouping-parameters","title":"Grouping Parameters","text":"<ul> <li> <p>aggregate (boolean) - Aggregate groups into a single analysis.     If <code>true</code>, each group will be searched with EncyclopeDIA separately against their respective chomatogram library.    These search results are subsequently aggregated and the false discovery rate (FDR) is estimated for the combined groups.    If <code>false</code>, the groups are analyzed individually and FDR is estimated within each group.    Default: <code>false</code></p> </li> <li> <p>agg_name (string) - The file prefix to use for the aggregated data. Default: <code>'aggregated'</code></p> </li> </ul>"},{"location":"parameters/#msconvert-parameters","title":"MSconvert Parameters","text":"<ul> <li>msconvert.demultiplex (boolean) - Demultiplex overlapping DIA windows. Default: <code>true</code></li> <li>msconvert.force (boolean) - Force existing mzML files to be reconverted. Default <code>false</code></li> </ul>"},{"location":"parameters/#encyclopedia-parameters","title":"EncyclopeDIA Parameters","text":"<ul> <li> <p>encyclopedia.chrlib_suffix (string) - The suffix to append to chromatogram library result files.   Default: <code>'chrlib'</code></p> </li> <li> <p>encyclopedia.quant_suffix (string) - The suffix to append to quantitative result files.    Default <code>'quant'</code></p> </li> <li> <p>encyclopedia.args (string) -  Command line arguments to pass to all EncyclopeDIA analyses.   The default attempts to match the defaults from the EncyclopeDIA graphical user interface.   Default: <code>'-percolatorVersion v3-01 -quantifyAcrossSamples true -scoringBreadthType window'</code></p> </li> <li> <p>encyclopedia.local.args (string) - Additional command line arguments to use when searching files.     Default: <code>''</code></p> </li> <li> <p>encyclopedia.global.args (string) -  Additional command line arguments to use when quantifying detected peptides across multiple runs.     Default: <code>''</code></p> </li> <li> <p>encyclopedia.jar (string) - The location of the EncyclopeDIA  executable.    Use <code>null</code> if EncyclopeDIA was installed with bioconda.   The default is the location in the Docker container.     Default: <code>'/code/encyclopedia.jar'</code></p> </li> </ul>"},{"location":"parameters/#msstats-parameters","title":"MSstats Parameters","text":"<ul> <li> <p>msstats.enabled (boolean) - Enable MSstats protein quantification. Default: <code>true</code></p> </li> <li> <p>msstats.normalization (string) - The normalization method used by MSstats.   Must be one of <code>'equalizeMedians'</code>, <code>'quantile'</code>, or <code>'none'</code>.   Default: <code>'equalizeMedians'</code></p> </li> <li> <p>msstats.reports (boolean) - Generate MSstats reports. Default: <code>false</code></p> </li> </ul>"},{"location":"parameters/#resource-parameters","title":"Resource Parameters","text":"<p>Change these to reflect your compute environment.</p> <ul> <li>max_memory (string) - The maximum memory allowed for each process. Default: <code>'128.GB'</code></li> <li>max_cpus (integer) - The maximum number of CPUs for each process. Default: <code>16</code></li> <li>max_time (string) - The maximum execution time for each process. Default: <code>'240.h'</code></li> </ul>"}]}